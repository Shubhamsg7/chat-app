(this["webpackJsonpchat-app-like-messenger"]=this["webpackJsonpchat-app-like-messenger"]||[]).push([[0],{21:function(e,t,s){},22:function(e,t,s){},26:function(e,t,s){"use strict";s.r(t);var n=s(4),c=s.n(n),a=s(14),i=s.n(a),r=(s(21),s(22),s(10)),l=s(16),j=s(8);s(13),s(27);j.a.initializeApp({apiKey:"AIzaSyB5-UQLVCbETTnnhI_zb-z8e7EsCwMHtys",authDomain:"chat-app-7bb11.firebaseapp.com",projectId:"chat-app-7bb11",storageBucket:"chat-app-7bb11.appspot.com",messagingSenderId:"513158755267",appId:"1:513158755267:web:bfd7f83c3a96679b680376",measurementId:"G-BQJBHP1084"});var o=j.a.auth(),d=j.a.firestore(),b=s(1),u=Object(n.createContext)(),m=function(e){var t=Object(n.useState)(null),s=Object(r.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(!0),m=Object(r.a)(i,2),h=m[0],O=m[1],p=Object(n.useState)([]),g=Object(r.a)(p,2),x=g[0],v=g[1];return Object(n.useEffect)((function(){o.onAuthStateChanged((function(e){a(e),O(!1)})),d.collection("messages").orderBy("createdAt","asc").onSnapshot((function(e){v(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))}))}),[]),Object(b.jsx)(u.Provider,{value:{register:function(){var e=new j.a.auth.GoogleAuthProvider;j.a.auth().signInWithPopup(e).then((function(t){j.a.auth().signInWithRedirect(e)}))},user:c,loader:h,logout:function(){o.signOut().then((function(){a(null)}))},sendMessage:function(e){d.collection("messages").add({msg:e,profile:c.photoURL,username:c.displayName,email:c.email,createdAt:j.a.firestore.FieldValue.serverTimestamp()})},allMsg:x},children:e.children})},h=function(){var e=Object(n.useContext)(u).sendMessage,t=Object(n.useState)(""),s=Object(r.a)(t,2),c=s[0],a=s[1];return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"input__form",children:Object(b.jsx)("form",{onSubmit:function(t){t.preventDefault(),e(c),a("")},children:Object(b.jsx)("input",{type:"text",className:"input__control",name:"",onChange:function(e){return a(e.target.value)},value:c,placeholder:"Write a message...",required:!0})})})})},O=function(){var e=Object(n.useContext)(u),t=e.allMsg,s=e.user;return Object(b.jsxs)("div",{className:"messages",children:[Object(b.jsx)(b.Fragment,{children:t.map((function(e){return e.email===s.email?Object(b.jsx)("div",{className:"messages__my",children:Object(b.jsx)("div",{className:"messages__my-msg",children:Object(b.jsx)("p",{children:e.msg})})},e.id):Object(b.jsxs)("div",{className:"messages__other",children:[Object(b.jsx)("div",{className:"messages__other-img",children:Object(b.jsx)("img",{src:e.profile,alt:"user"})}),Object(b.jsxs)("div",{className:"messages__other-msg",children:[Object(b.jsx)("span",{children:e.username}),Object(b.jsx)("p",{children:e.msg})]})]},e.id)}))}),Object(b.jsx)(h,{})]})},p=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Welcome to message"}),Object(b.jsx)("p",{children:" lorem ipsum"})]})},g=function(){var e=Object(n.useContext)(u),t=e.loader,s=e.user;return Object(b.jsx)("div",{children:t?"Loading...":s?Object(b.jsx)(O,{}):Object(b.jsx)(p,{})})},x=function(){var e=Object(n.useContext)(u),t=e.register,s=e.user,c=e.loader,a=e.logout,i=function(){t()},r=function(){a()};return Object(b.jsx)("div",{className:"navbar",children:Object(b.jsxs)("div",{className:"navbar__container",children:[Object(b.jsx)("div",{className:"navbar__logo",children:"Messenger"}),c?"loading...":s?Object(b.jsxs)("div",{className:"navbar__links",children:[Object(b.jsx)("li",{children:Object(b.jsx)("span",{className:"navbar__img",children:Object(b.jsx)("img",{src:s.photoURL,alt:"profile"})})}),Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"navbar__btn",onClick:r,children:"Logout"})})]}):Object(b.jsx)("div",{className:"navbar__links",children:Object(b.jsx)("ul",{children:Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"navbar__btn",onClick:i,children:"Register"})})})})]})})};var v=function(){return Object(b.jsxs)(m,{children:[Object(b.jsx)(x,{}),Object(b.jsx)(g,{})]})};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.8d0669df.chunk.js.map